-- SkyyScripts GUI pour 99 Nights in the Forest ðŸ”¦
local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "SkyyScriptsGui"
gui.ResetOnSpawn = false

local mainFrame, rightContent
local toggleKey = Enum.KeyCode.G
local key = "1234"
local menuVisible = false
local autoSaveEnabled = false

local function validateKey(inputKey)
    return inputKey == key
end

local function showMainMenu()
    if mainFrame then mainFrame:Destroy() end

    mainFrame = Instance.new("Frame", gui)
    mainFrame.Size = UDim2.new(0, 500, 0, 300)
    mainFrame.Position = UDim2.new(0.5, -250, 0.5, -150)
    mainFrame.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true

    local dragBar = Instance.new("Frame", mainFrame)
    dragBar.Size = UDim2.new(1, 0, 0, 30)
    dragBar.BackgroundColor3 = Color3.fromRGB(100, 0, 0)

    local dragTitle = Instance.new("TextLabel", dragBar)
    dragTitle.Size = UDim2.new(1, 0, 1, 0)
    dragTitle.BackgroundTransparency = 1
    dragTitle.TextColor3 = Color3.new(1, 1, 1)
    dragTitle.Text = "99 Nights in the Forest"
    dragTitle.Font = Enum.Font.GothamBold
    dragTitle.TextSize = 18

    local dragging = false
    local dragInput, dragStart, startPos

    dragBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    dragBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)

    local leftPanel = Instance.new("Frame", mainFrame)
    leftPanel.Size = UDim2.new(0, 120, 1, -30)
    leftPanel.Position = UDim2.new(0, 0, 0, 30)
    leftPanel.BackgroundColor3 = Color3.fromRGB(100, 0, 0)

    local separator = Instance.new("Frame", mainFrame)
    separator.Size = UDim2.new(0, 2, 1, -30)
    separator.Position = UDim2.new(0, 120, 0, 30)
    separator.BackgroundColor3 = Color3.new(0, 0, 0)

    rightContent = Instance.new("Frame", mainFrame)
    rightContent.Size = UDim2.new(1, -122, 1, -30)
    rightContent.Position = UDim2.new(0, 122, 0, 30)
    rightContent.BackgroundColor3 = Color3.new(0, 0, 0)
    rightContent.BackgroundTransparency = 0.3
    rightContent.ClipsDescendants = true

    local categories = {"Main", "Bring Items", "Auto", "Visual", "Teleport", "Settings"}

    local function clearRight()
        for _, c in ipairs(rightContent:GetChildren()) do
            c:Destroy()
        end
    end

local function showCategory(cat)
    clearRight()
    if cat == "Main" then
        local tpBtn = Instance.new("TextButton", rightContent)
        tpBtn.Size = UDim2.new(0, 150, 0, 35)
        tpBtn.Position = UDim2.new(0, 10, 0, 10)
        tpBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        tpBtn.TextColor3 = Color3.new(1, 1, 1)
        tpBtn.Font = Enum.Font.Gotham
        tpBtn.TextSize = 14
        tpBtn.Text = "TP to Campfire"
        tpBtn.MouseButton1Click:Connect(function()
            local char = player.Character
            if char and char:FindFirstChild("HumanoidRootPart") then
                char.HumanoidRootPart.CFrame = CFrame.new(Vector3.new(2.026, 4, 9.497))
            end
        end)

    elseif cat == "Bring Items" then
        local bringBtn = Instance.new("TextButton", rightContent)
        bringBtn.Size = UDim2.new(0, 150, 0, 35)
        bringBtn.Position = UDim2.new(0, 10, 0, 10)
        bringBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        bringBtn.TextColor3 = Color3.new(1,1,1)
        bringBtn.Font = Enum.Font.Gotham
        bringBtn.TextSize = 14
        bringBtn.Text = "Bring Food/heal"
        bringBtn.MouseButton1Click:Connect(function()
            local foodNames = {
                "Carrot", "Corn", "Pumpkin", "Apple", "Morsel", "cooked Morsel",
                "Steak", "cooked Steak", "Cake", "Chili", "Stew", "Hearty Stew",
                "Bandage", "Medkit"
            }
            local char = player.Character
            if not char or not char:FindFirstChild("HumanoidRootPart") then return end
            local hrpPos = char.HumanoidRootPart.Position

            coroutine.wrap(function()
                for _, obj in ipairs(workspace:GetDescendants()) do
                    if table.find(foodNames, obj.Name) then
                        local partToMove
                        if obj:IsA("Model") then
                            partToMove = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                        elseif obj:IsA("BasePart") then
                            partToMove = obj
                        end
                        if partToMove then
                            partToMove.CFrame = CFrame.new(hrpPos + Vector3.new(math.random(-3,3), 1, math.random(-3,3)))
                            task.wait(0.01)
                        end
                    end
                end
            end)()
        end)

        local bringLogsBtn = Instance.new("TextButton", rightContent)
        bringLogsBtn.Size = UDim2.new(0, 150, 0, 35)
        bringLogsBtn.Position = UDim2.new(0, 170, 0, 10)
        bringLogsBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        bringLogsBtn.TextColor3 = Color3.new(1, 1, 1)
        bringLogsBtn.Font = Enum.Font.Gotham
        bringLogsBtn.TextSize = 14
        bringLogsBtn.Text = "Bring Logs"
        bringLogsBtn.MouseButton1Click:Connect(function()
            local logName = "Log"
            local char = player.Character
            if not char or not char:FindFirstChild("HumanoidRootPart") then return end
            local hrpPos = char.HumanoidRootPart.Position

            coroutine.wrap(function()
                for _, obj in ipairs(workspace:GetDescendants()) do
                    if obj.Name == logName then
                        local partToMove
                        if obj:IsA("Model") then
                            partToMove = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                        elseif obj:IsA("BasePart") then
                            partToMove = obj
                        end
                        if partToMove then
                            partToMove.CFrame = CFrame.new(hrpPos + Vector3.new(math.random(-3,3), 1, math.random(-3,3)))
                            task.wait(0.01)
                        end
                    end
                end
            end)()
        end)

        local bringGearBtn = Instance.new("TextButton", rightContent)
        bringGearBtn.Size = UDim2.new(0, 150, 0, 35)
        bringGearBtn.Position = UDim2.new(0, 10, 0, 50)
        bringGearBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        bringGearBtn.TextColor3 = Color3.new(1, 1, 1)
        bringGearBtn.Font = Enum.Font.Gotham
        bringGearBtn.TextSize = 14
        bringGearBtn.Text = "Bring Gear"
        bringGearBtn.MouseButton1Click:Connect(function()
            local gearItems = {
                "UFO Scrap",
                "Cultist Prototype",
                "Cultist Experiment",
                "Washing Machine",
                "Old Car Engine",
                "Metal Chair",
                "Tyre",
                "Broken Microwave",
                "Broken Radio",
                "Broken Fan",
                "UFO Component",
                "UFO Junk",
                "Sheet Metal",
                "Bolt",
                "Cultist Gem",
                "Forest Gem"
            }
            local char = player.Character
            if not char or not char:FindFirstChild("HumanoidRootPart") then return end
            local hrpPos = char.HumanoidRootPart.Position

            coroutine.wrap(function()
                for _, obj in ipairs(workspace:GetDescendants()) do
                    if table.find(gearItems, obj.Name) then
                        local partToMove
                        if obj:IsA("Model") then
                            partToMove = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                        elseif obj:IsA("BasePart") then
                            partToMove = obj
                        end
                        if partToMove then
                            partToMove.CFrame = CFrame.new(hrpPos + Vector3.new(math.random(-3,3), 1, math.random(-3,3)))
                            task.wait(0.01)
                        end
                    end
                end
            end)()
        end)

-- Bring Fuel
local bringFuelBtn = Instance.new("TextButton", rightContent)
bringFuelBtn.Size = UDim2.new(0, 150, 0, 35)
bringFuelBtn.Position = UDim2.new(0, 170, 0, 50) -- place-le sous "Bring Log"
bringFuelBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
bringFuelBtn.TextColor3 = Color3.new(1, 1, 1)
bringFuelBtn.Font = Enum.Font.Gotham
bringFuelBtn.TextSize = 14
bringFuelBtn.Text = "Bring Fuel"

bringFuelBtn.MouseButton1Click:Connect(function()
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local hrp = char.HumanoidRootPart

    local keywords = {
        "corpse", "sapling", "alien log", "chair",
        "coal", "fuel canister", "oil barrel", "biofuel"
    }

    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") or obj:IsA("Model") then
            local name = obj.Name:lower()
            for _, keyword in ipairs(keywords) do
                if name:find(keyword) then
                    local part = obj:IsA("Model") and obj:FindFirstChildWhichIsA("BasePart") or obj
                    if part then
                        part.CFrame = hrp.CFrame + Vector3.new(math.random(-5,5), 0, math.random(-5,5))
                    end
                    break
                end
            end
        end
    end
end)

local bringOtherBtn = Instance.new("TextButton", rightContent)
bringOtherBtn.Size = UDim2.new(0, 150, 0, 35)
bringOtherBtn.Position = UDim2.new(0, 10, 0, 90) -- sous "Bring Fuel"
bringOtherBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
bringOtherBtn.TextColor3 = Color3.new(1, 1, 1)
bringOtherBtn.Font = Enum.Font.Gotham
bringOtherBtn.TextSize = 14
bringOtherBtn.Text = "Bring Other"

bringOtherBtn.MouseButton1Click:Connect(function()
    local otherItems = {
        "Chili Seeds", "Flower Seeds", "Berry Seeds", "Firefly Seeds",
        "Old Sack", "Good Sack", "Giant Sack",
        "Strong Flashlight", "Old Flashlight",
        "Bunny Foot", "Wolf Pelt", "Alpha Wolf Pelt", "Bear Pelt"
    }
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local hrpPos = char.HumanoidRootPart.Position

    coroutine.wrap(function()
        for _, obj in ipairs(workspace:GetDescendants()) do
            if table.find(otherItems, obj.Name) then
                local partToMove
                if obj:IsA("Model") then
                    partToMove = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                elseif obj:IsA("BasePart") then
                    partToMove = obj
                end
                if partToMove then
                    partToMove.CFrame = CFrame.new(hrpPos + Vector3.new(math.random(-3,3), 1, math.random(-3,3)))
                    task.wait(0.01)
                end
            end
        end
    end)()
end)

local bringWeaponBtn = Instance.new("TextButton", rightContent)
bringWeaponBtn.Size = UDim2.new(0, 150, 0, 35)
bringWeaponBtn.Position = UDim2.new(0, 170, 0, 90) -- juste en dessous du bouton Bring Fuel
bringWeaponBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
bringWeaponBtn.TextColor3 = Color3.new(1, 1, 1)
bringWeaponBtn.Font = Enum.Font.Gotham
bringWeaponBtn.TextSize = 14
bringWeaponBtn.Text = "Bring Weapon"

bringWeaponBtn.MouseButton1Click:Connect(function()
    local weaponArmorAmmoItems = {
        "Leather Body", "Iron Body", "Thorn Body", "Riot Shield",
        "Alien Armor",
        "Spear", "Morningstar", "Katana", "Laser Sword",
        "Revolver", "Rifle", "Tactical Shotgun", "Kunai", "Ray Gun", "Laser Cannon",
        "Revolver Ammo", "Rifle Ammo", "Shotgun Ammo"
    }
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local hrpPos = char.HumanoidRootPart.Position

    coroutine.wrap(function()
        for _, obj in ipairs(workspace:GetDescendants()) do
            if table.find(weaponArmorAmmoItems, obj.Name) then
                local partToMove
                if obj:IsA("Model") then
                    partToMove = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                elseif obj:IsA("BasePart") then
                    partToMove = obj
                end
                if partToMove then
                    partToMove.CFrame = CFrame.new(hrpPos + Vector3.new(math.random(-3,3), 1, math.random(-3,3)))
                    task.wait(0.01)
                end
            end
        end
    end)()
end)

elseif cat == "Auto" then
local autoPlant = false

local plantBtn = Instance.new("TextButton", rightContent)
plantBtn.Size = UDim2.new(0, 160, 0, 30)
plantBtn.Position = UDim2.new(0, 10, 0, 10)
plantBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
plantBtn.TextColor3 = Color3.new(1, 1, 1)
plantBtn.Font = Enum.Font.Gotham
plantBtn.TextSize = 14
plantBtn.Text = "Auto Plant Sapling: OFF"

plantBtn.MouseButton1Click:Connect(function()
    autoPlant = not autoPlant
    plantBtn.Text = "Auto Plant Sapling: " .. (autoPlant and "ON" or "OFF")
end)

-- Boucle de plantation
task.spawn(function()
    while true do
        task.wait(2) -- petit dÃ©lai pour Ã©viter le freeze
        if autoPlant then
            for _, obj in ipairs(workspace:GetDescendants()) do
                if obj.Name == "Sapling" and obj:IsA("Model") then
                    local prompt = obj:FindFirstChildWhichIsA("ProximityPrompt", true)
                    if prompt then
                        fireproximityprompt(prompt)
                        task.wait(0.2)
                    end
                end
            end
        end
    end
end)

local autoPlant = false

local plantBtn = Instance.new("TextButton", rightContent)
plantBtn.Size = UDim2.new(0, 160, 0, 30)
plantBtn.Position = UDim2.new(0, 10, 0, 10)
plantBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
plantBtn.TextColor3 = Color3.new(1, 1, 1)
plantBtn.Font = Enum.Font.Gotham
plantBtn.TextSize = 14
plantBtn.Text = "Auto Plant Sapling: OFF"

plantBtn.MouseButton1Click:Connect(function()
    autoPlant = not autoPlant
    plantBtn.Text = "Auto Plant Sapling: " .. (autoPlant and "ON" or "OFF")
end)

-- Heal Campfire Button
local healBtn = Instance.new("TextButton", rightContent)
healBtn.Size = UDim2.new(0, 160, 0, 30)
healBtn.Position = UDim2.new(0, 180, 0, 10)
healBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
healBtn.TextColor3 = Color3.new(1, 1, 1)
healBtn.Font = Enum.Font.Gotham
healBtn.TextSize = 14
healBtn.Text = "Heal Campfire"

local campfirePosition = Vector3.new(-0.16, 13.20, -0.03)

healBtn.MouseButton1Click:Connect(function()
    local namesToTeleport = {
        ["corpse"] = true,
        ["sapling"] = true,
        ["alien log"] = true,
        ["chair"] = true,
        ["coal"] = true,
        ["fuel canister"] = true,
        ["oil barrel"] = true,
        ["biofuel"] = true,
        ["log"] = true,
    }

    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("Model") then
            local name = obj.Name:lower()
            if name:find("log") or namesToTeleport[name] then
                local primary = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                if primary then
                    primary.CFrame = CFrame.new(campfirePosition + Vector3.new(math.random(-3, 3), 1, math.random(-3, 3)))
                end
            end
        end
    end
end)


-- Boucle de plantation amÃ©liorÃ©e
coroutine.wrap(function()
    while true do
        task.wait(1)
        if autoPlant then
            for _, obj in ipairs(workspace:GetDescendants()) do
                if obj:IsA("Model") and obj.Name == "Item Sapling" and not plantedSaplings[obj] then
                    local prompt = obj:FindFirstChildWhichIsA("ProximityPrompt", true)
                    if prompt and prompt.Enabled then
                        fireproximityprompt(prompt)
                        plantedSaplings[obj] = true
                        task.wait(0.2)
                    end
                end
            end
        end
    end
end)()

-- AUTO SAVE BUTTON (dans catÃ©gorie Main)
local autoSave = false
local campfirePosition = Vector3.new(-0.16, 13.20, -0.03)

local autoSaveBtn = Instance.new("TextButton", mainContent)
autoSaveBtn.Size = UDim2.new(0, 160, 0, 30)
autoSaveBtn.Position = UDim2.new(0, 10, 0, 50) -- ajuste ici si besoin
autoSaveBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
autoSaveBtn.TextColor3 = Color3.new(1, 1, 1)
autoSaveBtn.Font = Enum.Font.Gotham
autoSaveBtn.TextSize = 14
autoSaveBtn.Text = "Auto Save: OFF"

autoSaveBtn.MouseButton1Click:Connect(function()
	autoSave = not autoSave
	autoSaveBtn.Text = "Auto Save: " .. (autoSave and "ON" or "OFF")
end)

-- AUTO SAVE LOOP
coroutine.wrap(function()
	while true do
		task.wait(1)
		if autoSave then
			local player = game.Players.LocalPlayer
			if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
				local humanoid = player.Character:FindFirstChildWhichIsA("Humanoid")
				if humanoid and humanoid.Health > 0 then
					local maxHealth = humanoid.MaxHealth
					if humanoid.Health <= (maxHealth * 0.25) then
						player.Character:MoveTo(campfirePosition)
					end
				end
			end
		end
	end
end)()



    elseif cat == "Teleport" then
        local tpBtn = Instance.new("TextButton", rightContent)
        tpBtn.Size = UDim2.new(0, 150, 0, 35)
        tpBtn.Position = UDim2.new(0, 10, 0, 10)
        tpBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        tpBtn.TextColor3 = Color3.new(1, 1, 1)
        tpBtn.Font = Enum.Font.Gotham
        tpBtn.TextSize = 14
        tpBtn.Text = "TP to Campfire"
        tpBtn.MouseButton1Click:Connect(function()
            local char = player.Character
            if char and char:FindFirstChild("HumanoidRootPart") then
                char.HumanoidRootPart.CFrame = CFrame.new(Vector3.new(2.026, 4, 9.497))
            end
        end)

-- TP TO CHILD
local function notify(title, text)
    game.StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Duration = 5
    })
end

local teleportBtn = Instance.new("TextButton", rightContent)
teleportBtn.Size = UDim2.new(0, 160, 0, 30)
teleportBtn.Position = UDim2.new(0, 10, 0, 50)
teleportBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
teleportBtn.TextColor3 = Color3.new(1, 1, 1)
teleportBtn.Font = Enum.Font.Gotham
teleportBtn.TextSize = 14
teleportBtn.Text = "TP to Child"

local options = {"Dino Kid", "Squid Kid", "Kraken Kid", "Koala Kid"}

local dropdown = Instance.new("Frame", rightContent)
dropdown.Size = UDim2.new(0, 160, 0, #options * 25)
dropdown.Position = UDim2.new(0, 10, 0, 90)
dropdown.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
dropdown.Visible = false

for i, childName in ipairs(options) do
    local btn = Instance.new("TextButton", dropdown)
    btn.Size = UDim2.new(1, 0, 0, 25)
    btn.Position = UDim2.new(0, 0, 0, (i - 1) * 25)
    btn.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Text = childName

    btn.MouseButton1Click:Connect(function()
        dropdown.Visible = false
        local found = nil

        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("Model") and obj.Name == childName then
                local hrp = obj:FindFirstChild("HumanoidRootPart") or obj:FindFirstChildWhichIsA("BasePart")
                if hrp then
                    found = hrp
                    break
                end
            end
        end

        local character = game.Players.LocalPlayer.Character
        if found and character and character:FindFirstChild("HumanoidRootPart") then
            local dist = (character.HumanoidRootPart.Position - found.Position).Magnitude
            if dist > 3 then
                character:MoveTo(found.Position)
            else
                notify("SkyyScripts", "Map is too small to teleport to this child.")
            end
        else
            notify("SkyyScripts", "Child not found in the map.")
        end
    end)
end

teleportBtn.MouseButton1Click:Connect(function()
    dropdown.Visible = not dropdown.Visible
end)

    elseif cat == "Settings" then
        local devLabel = Instance.new("TextLabel", rightContent)
        devLabel.Size = UDim2.new(1, -20, 0, 30)
        devLabel.Position = UDim2.new(0, 10, 0, 10)
        devLabel.BackgroundTransparency = 1
        devLabel.TextColor3 = Color3.new(1, 1, 1)
        devLabel.Font = Enum.Font.GothamBold
        devLabel.TextSize = 18
        devLabel.Text = "Developer : skyy"

        local linkLabel = Instance.new("TextLabel", rightContent)
        linkLabel.Size = UDim2.new(1, -20, 0, 30)
        linkLabel.Position = UDim2.new(0, 10, 0, 45)
        linkLabel.BackgroundTransparency = 1
        linkLabel.TextColor3 = Color3.new(1, 1, 1)
        linkLabel.Font = Enum.Font.Gotham
        linkLabel.TextSize = 16
        linkLabel.Text = "https://discord.gg/vtzYXtraXR"

        local infoLabel = Instance.new("TextLabel", rightContent)
        infoLabel.Size = UDim2.new(1, -20, 0, 30)
        infoLabel.Position = UDim2.new(0, 10, 0, 80)
        infoLabel.BackgroundTransparency = 1
        infoLabel.TextColor3 = Color3.new(1, 1, 1)
        infoLabel.Font = Enum.Font.Gotham
        infoLabel.TextSize = 14
        infoLabel.Text = "G key open/close menu"

        local killBtn = Instance.new("TextButton", rightContent)
        killBtn.Size = UDim2.new(0, 200, 0, 35)
        killBtn.Position = UDim2.new(0, 88, 0, 120)
        killBtn.BackgroundColor3 = Color3.fromRGB(120, 0, 0)
        killBtn.TextColor3 = Color3.new(1, 1, 1)
        killBtn.Font = Enum.Font.GothamBold
        killBtn.TextSize = 14
        killBtn.Text = "KILL MENU"
        killBtn.MouseButton1Click:Connect(function()
            gui:Destroy()
        end)
    end
end


    for i, name in ipairs(categories) do
        local btn = Instance.new("TextButton", leftPanel)
        btn.Size = UDim2.new(1, 0, 0, 30)
        btn.Position = UDim2.new(0, 0, 0, (i - 1) * 30)
        btn.BackgroundColor3 = Color3.fromRGB(120, 0, 0)
        btn.TextColor3 = Color3.new(1, 1, 1)
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 14
        btn.Text = name
        btn.MouseButton1Click:Connect(function()
            showCategory(name)
        end)
    end
end

-- Interface ClÃ© (ancienne version + compact)
local keyFrame = Instance.new("Frame", gui)
keyFrame.Size = UDim2.new(0, 260, 0, 130)
keyFrame.Position = UDim2.new(0.5, -130, 0.5, -65)
keyFrame.BackgroundColor3 = Color3.fromRGB(100, 0, 0)

local title = Instance.new("TextLabel", keyFrame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "SkyyScripts - Key System"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16

local textBox = Instance.new("TextBox", keyFrame)
textBox.Size = UDim2.new(1, -20, 0, 35)
textBox.Position = UDim2.new(0, 10, 0, 40)
textBox.PlaceholderText = "Enter key here"
textBox.Text = ""
textBox.Font = Enum.Font.Gotham
textBox.TextSize = 14
textBox.BackgroundColor3 = Color3.fromRGB(120, 0, 0)
textBox.TextColor3 = Color3.new(1, 1, 1)

local submitBtn = Instance.new("TextButton", keyFrame)
submitBtn.Size = UDim2.new(1, -20, 0, 35)
submitBtn.Position = UDim2.new(0, 10, 0, 80)
submitBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
submitBtn.TextColor3 = Color3.new(1, 1, 1)
submitBtn.Font = Enum.Font.Gotham
submitBtn.TextSize = 14
submitBtn.Text = "Validate Key"

submitBtn.MouseButton1Click:Connect(function()
    if validateKey(textBox.Text) then
        keyFrame:Destroy()
        showMainMenu()
        menuVisible = true
    else
        textBox.Text = ""
        textBox.PlaceholderText = "Wrong key, try again"
    end
end)

game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == toggleKey and menuVisible then
        if mainFrame then
            mainFrame.Visible = not mainFrame.Visible
        end
    end
end)
